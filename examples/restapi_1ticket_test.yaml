# Simple tests to verify things work against a FAKE 1Ticket REST service that returns JSON.
---
- config:
    - testset: "Demonstrate use of POST"
- test: # create entity by POST
    - name: "Obtain Job_id"
    - timeout: 1
    - url: "127.0.0.1:8089/pdfs/digester/v1"
    - method: "POST"
    - headers: {Content-Type: application/json}
    - body: '{"url": "https://dl.dropboxusercontent.com/s/rgvi1w40qn5kbky/unm_Y_1_1-5.pdf"}'
    - expected_status: [200]
    - x-api-key:  YOUR_API_KEY
    - validators: # operator is applied as: <actual> <operator> <expected>
        - compare: {header: "content-type", comparator: contains, expected: 'application/json'}
        - compare: {jsonpath_mini: "job_id",   comparator: "eq",     expected: "db3d0f36-c57f-45f6-9fc6-8cc1f782352d"}
        - compare: {jmespath: 'job_id', comparator: 'eq', expected: 'db3d0f36-c57f-45f6-9fc6-8cc1f782352d' }
        - compare: {raw_body: "",      comparator: "regex",     expected: '.*'}